# ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ù–∞—Å—Ç—Ä–æ–π–∫–∏ State Machine

## üìã –®–∞–≥–∏ –¥–ª—è –ó–∞–≤–µ—Ä—à–µ–Ω–∏—è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### ‚òê 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Gameplay –°—Ü–µ–Ω—ã

#### 1.1 –°–æ–∑–¥–∞—Ç—å GameController
- [ ] –û—Ç–∫—Ä—ã—Ç—å —Å—Ü–µ–Ω—É `Assets/Scenes/main.unity` (–∏–ª–∏ Gameplay)
- [ ] Create Empty GameObject ‚Üí –Ω–∞–∑–≤–∞—Ç—å `GameController`
- [ ] Position: (0, 0, 0)

#### 1.2 –î–æ–±–∞–≤–∏—Ç—å –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [ ] GameController ‚Üí Add Component ‚Üí `LevelStateMachine`
- [ ] GameController ‚Üí Add Component ‚Üí `GameplaySceneInitializer`

#### 1.3 –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Systems
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –µ—Å—Ç—å GameObject `QuizSystem` —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º `QuizSystem`
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –µ—Å—Ç—å GameObject `RewardSystem` —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º `RewardSystem`

---

### ‚òê 2. –°–æ–∑–¥–∞–Ω–∏–µ LevelData ScriptableObjects

#### 2.1 Warmup Level
- [ ] Project ‚Üí Assets/ScriptableObjects/Levels
- [ ] Right Click ‚Üí Create ‚Üí Manasik ‚Üí Level Data
- [ ] –ù–∞–∑–≤–∞—Ç—å: `WarmupLevel`
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å:
  - **Level Id:** `level_1_warmup`
  - **Level Name:** `–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –•–∞–¥–∂—É`
  - **Description:** `–ò–∑—É—á–∏—Ç–µ –æ—Å–Ω–æ–≤—ã –•–∞–¥–∂–∞ –≤ —ç—Ç–æ–º –æ–±—É—á–∞—é—â–µ–º —É—Ä–æ–≤–Ω–µ`
  - **Thumbnail:** (–Ω–∞–∑–Ω–∞—á–∏—Ç—å —Å–ø—Ä–∞–π—Ç)
  - **Pass Threshold:** `60`
  - **Completion Bonus Gems:** `20`
  - **Questions:** –î–æ–±–∞–≤–∏—Ç—å 5-7 –≤–æ–ø—Ä–æ—Å–æ–≤

#### 2.2 Miqat Level
- [ ] Create ‚Üí Manasik ‚Üí Level Data
- [ ] –ù–∞–∑–≤–∞—Ç—å: `MiqatLevel`
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å:
  - **Level Id:** `level_2_miqat`
  - **Level Name:** `Miqat - –ú–µ—Å—Ç–æ –ò—Ö—Ä–∞–º–∞`
  - **Description:** `–£–∑–Ω–∞–π—Ç–µ –æ –º–µ—Å—Ç–∞—Ö –ø—Ä–∏–Ω—è—Ç–∏—è –∏—Ö—Ä–∞–º–∞`
  - **Thumbnail:** (–Ω–∞–∑–Ω–∞—á–∏—Ç—å —Å–ø—Ä–∞–π—Ç)
  - **Pass Threshold:** `70`
  - **Completion Bonus Gems:** `30`
  - **Questions:** –î–æ–±–∞–≤–∏—Ç—å 7-10 –≤–æ–ø—Ä–æ—Å–æ–≤

#### 2.3 Tawaf Level
- [ ] Create ‚Üí Manasik ‚Üí Level Data
- [ ] –ù–∞–∑–≤–∞—Ç—å: `TawafLevel`
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å:
  - **Level Id:** `level_3_tawaf`
  - **Level Name:** `Tawaf - –û–±—Ö–æ–¥ –ö–∞–∞–±—ã`
  - **Description:** `–°–æ–≤–µ—Ä—à–∏—Ç–µ —Å–≤—è—â–µ–Ω–Ω—ã–π –æ–±—Ö–æ–¥ –ö–∞–∞–±—ã`
  - **Thumbnail:** (–Ω–∞–∑–Ω–∞—á–∏—Ç—å —Å–ø—Ä–∞–π—Ç)
  - **Pass Threshold:** `80`
  - **Completion Bonus Gems:** `50`
  - **Questions:** –î–æ–±–∞–≤–∏—Ç—å 14-21 –≤–æ–ø—Ä–æ—Å (2-3 –∫—Ä—É–≥–∞ –ø–æ 7)

---

### ‚òê 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ LevelSelectionUI

- [ ] –û—Ç–∫—Ä—ã—Ç—å —Å—Ü–µ–Ω—É LevelSelection
- [ ] –ù–∞–π—Ç–∏ GameObject —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º `LevelSelectionUI`
- [ ] –í Inspector ‚Üí **Levels** (–º–∞—Å—Å–∏–≤):
  - Element 0: –ü–µ—Ä–µ—Ç–∞—â–∏—Ç—å `WarmupLevel`
  - Element 1: –ü–µ—Ä–µ—Ç–∞—â–∏—Ç—å `MiqatLevel`
  - Element 2: –ü–µ—Ä–µ—Ç–∞—â–∏—Ç—å `TawafLevel`

---

### ‚òê 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GameplayUI

- [ ] –û—Ç–∫—Ä—ã—Ç—å —Å—Ü–µ–Ω—É Gameplay
- [ ] –ù–∞–π—Ç–∏ Canvas —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º `GameplayUI`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Å—Å—ã–ª–∫–∏ –≤ Inspector (—Å–º. SCENE_SETUP.md)

---

### ‚òê 5. –î–æ–±–∞–≤–∏—Ç—å Pause Menu (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### 5.1 –°–æ–∑–¥–∞—Ç—å UI
- [ ] –í Canvas ‚Üí Create Empty ‚Üí –Ω–∞–∑–≤–∞—Ç—å `PauseMenu`
- [ ] –î–æ–±–∞–≤–∏—Ç—å Panel (—Ñ–æ–Ω —Å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ–º)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏: Resume, Restart, Main Menu

#### 5.2 –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ö–æ–º–ø–æ–Ω–µ–Ω—Ç
- [ ] PauseMenu ‚Üí Add Component ‚Üí `PauseMenuUI`
- [ ] –ù–∞–∑–Ω–∞—á–∏—Ç—å –≤ Inspector:
  - Pause Panel
  - Pause Button
  - Resume Button
  - Restart Button
  - Main Menu Button

---

### ‚òê 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### 6.1 Warmup Level
- [ ] Play Mode ‚Üí Main Menu ‚Üí Level Selection
- [ ] –í—ã–±—Ä–∞—Ç—å Warmup level
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Console:
  - `[LevelManager] Starting level: ... with state: warmup`
  - `[WarmupLevelState] Entering state`
- [ ] –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –≥–µ–º–æ–≤
- [ ] –ó–∞–≤–µ—Ä—à–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ Miqat —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω

#### 6.2 Miqat Level
- [ ] –í—ã–±—Ä–∞—Ç—å Miqat level
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Console:
  - `[MiqatLevelState] Entering state`
- [ ] –û—Ç–≤–µ—Ç–∏—Ç—å –±—ã—Å—Ç—Ä–æ (< 3 –º–∏–Ω) ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å Speed Bonus
- [ ] –ü–æ–ª—É—á–∏—Ç—å ‚â•90% ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å Excellence Bonus
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ Tawaf —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω

#### 6.3 Tawaf Level
- [ ] –í—ã–±—Ä–∞—Ç—å Tawaf level
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Console:
  - `[TawafLevelState] Entering state`
  - `[TawafLevelState] Circle 1 of Tawaf`
- [ ] –û—Ç–≤–µ—Ç–∏—Ç—å 3+ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥—Ä—è–¥ ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å Streak Bonus
- [ ] –û—Ç–≤–µ—Ç–∏—Ç—å 7 –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥—Ä—è–¥ ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å Perfect Circle
- [ ] –ü–æ–ª—É—á–∏—Ç—å 100% ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å Perfect Tawaf Bonus

#### 6.4 Pause/Resume
- [ ] –ù–∞–∂–∞—Ç—å ESC –∏–ª–∏ –∫–Ω–æ–ø–∫—É Pause
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏–≥—Ä–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∞—Å—å (Time.timeScale = 0)
- [ ] –ù–∞–∂–∞—Ç—å Resume
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∏–ª–∞—Å—å

#### 6.5 Restart
- [ ] –ù–∞–∂–∞—Ç—å Restart –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —É—Ä–æ–≤–µ–Ω—å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å —Ç–µ–º –∂–µ StateId

---

### ‚òê 7. –§–∏–Ω–∞–ª—å–Ω–∞—è –ü—Ä–æ–≤–µ—Ä–∫–∞

- [ ] –í—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –≤ LevelStateMachine
- [ ] LevelId –≤ ScriptableObjects —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
- [ ] –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ ProgressService
- [ ] –ì–µ–º—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ Console
- [ ] –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ü–µ–Ω–∞–º–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–ª–∞–≤–Ω–æ

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ü—Ä–æ–±–ª–µ–º—ã –∏ –†–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: "QuizSystem not found in scene"
**–ü—Ä–∏—á–∏–Ω–∞:** –í —Å—Ü–µ–Ω–µ Gameplay –Ω–µ—Ç GameObject —Å QuizSystem  
**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å GameObject –∏ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç QuizSystem

### –ü—Ä–æ–±–ª–µ–º–∞: "State 'warmup' not registered"
**–ü—Ä–∏—á–∏–Ω–∞:** LevelStateMachine –Ω–µ –≤—ã–∑–≤–∞–ª RegisterStates()  
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Awake() –≤ LevelStateMachine –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

### –ü—Ä–æ–±–ª–µ–º–∞: –£—Ä–æ–≤–µ–Ω—å –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
**–ü—Ä–∏—á–∏–Ω–∞:** ActiveLevel –∏–ª–∏ ActiveStateId = null  
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ LevelSelectionUI –≤—ã–∑—ã–≤–∞–µ—Ç StartLevel(data, stateId)

### –ü—Ä–æ–±–ª–µ–º–∞: Pause –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–ü—Ä–∏—á–∏–Ω–∞:** StateMachine reference –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞  
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ GameplaySceneInitializer –≤—ã–ø–æ–ª–Ω–∏–ª—Å—è –≤ Awake()

### –ü—Ä–æ–±–ª–µ–º–∞: –ì–µ–º—ã –Ω–µ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è
**–ü—Ä–∏—á–∏–Ω–∞:** RewardSystem –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –∏–ª–∏ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞  
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ RewardSystem –µ—Å—Ç—å –≤ —Å—Ü–µ–Ω–µ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞—Ö–æ–¥–∏—Ç –µ—ë

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- ‚úÖ 3 —É—Ä–æ–≤–Ω—è —Ä–∞–±–æ—Ç–∞—é—Ç —Å —Ä–∞–∑–Ω–æ–π –ª–æ–≥–∏–∫–æ–π
- ‚úÖ Pause/Resume —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
- ‚úÖ –ë–æ–Ω—É—Å—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è —Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–∞–≤–∏–ª–∞–º –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–≤–Ω—è
- ‚úÖ UI –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –ø–ª–∞–≤–Ω—ã–µ
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ Console

---

## üìû –°–ª–µ–¥—É—é—â–∏–µ –ó–∞–¥–∞—á–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–∂–Ω–æ:
1. –î–æ–±–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
3. –î–æ–±–∞–≤–∏—Ç—å –∑–≤—É–∫–æ–≤–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ
4. –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
5. –î–æ–±–∞–≤–∏—Ç—å –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä –∏–ª–∏ –ª–∏–¥–µ—Ä–±–æ—Ä–¥—ã
6. –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã–µ —è–∑—ã–∫–∏

---

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç —á–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ø–æ—ç—Ç–∞–ø–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏!** ‚ú®

*–°–æ–∑–¥–∞–Ω–æ: 21 —Ñ–µ–≤—Ä–∞–ª—è 2026*

